version: 0.2
phases:
  install:
    runtime-versions:
      python: 3.8
    commands:
      - echo "Installing AWS CLI"
      - pip install awscli --upgrade
  build:
    commands:
      - echo "Packaging LF1..."
      - cp LF1 lambda_function.py  # Rename LF1 to lambda_function.py
      - zip -r lf1.zip lambda_function.py  # Package LF1 into a ZIP file
      - echo "Packaging LF2..."
      - cp LF2 lambda_function.py  # Rename LF2 to lambda_function.py
      - zip -r lf2.zip lambda_function.py  # Package LF2 into a ZIP file
  post_build:
    commands:
      - echo "Deploying LF1..."
      - aws lambda update-function-code --function-name LF1 --zip-file fileb://lf1.zip
      - echo "Deploying LF2..."
      - aws lambda update-function-code --function-name LF2 --zip-file fileb://lf2.zip
artifacts:
  files:
    - lf1.zip
    - lf2.zip
